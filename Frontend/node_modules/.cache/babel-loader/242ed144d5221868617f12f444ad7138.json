{"ast":null,"code":"var _jsxFileName = \"/home/luisa/Documents/GoStack/Desafios/desafio-fundamentos-reactjs/src/pages/Import/index.tsx\";\nimport React, { useState } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport filesize from 'filesize';\nimport Header from '../../components/Header';\nimport FileList from '../../components/FileList';\nimport Upload from '../../components/Upload';\nimport { Container, Title, ImportFileContainer, Footer } from './styles';\nimport alert from \"../../assets/alert.svg\";\nimport api from '../../services/api';\n\nconst Import = () => {\n  const [uploadedFiles, setUploadedFiles] = useState([]);\n  const history = useHistory();\n\n  async function handleUpload() {\n    const data = new FormData();\n    const file = uploadedFiles[0];\n    data.append('file', file.file);\n\n    try {\n      await api.post('/transactions/import', data);\n    } catch (err) {\n      console.log(err.response.error);\n    }\n  }\n\n  function submitFile(files) {\n    const uploadFiles = files.map(file => ({\n      file,\n      name: file.name,\n      readableSize: filesize(file.size)\n    }));\n    setUploadedFiles(uploadFiles);\n  }\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Header, {\n    size: \"small\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Container, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Title, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 9\n    }\n  }, \"Importar uma transa\\xE7\\xE3o\"), /*#__PURE__*/React.createElement(ImportFileContainer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Upload, {\n    onUpload: submitFile,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 11\n    }\n  }), !!uploadedFiles.length && /*#__PURE__*/React.createElement(FileList, {\n    files: uploadedFiles,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 38\n    }\n  }), /*#__PURE__*/React.createElement(Footer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: alert,\n    alt: \"Alert\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 15\n    }\n  }), \"Permitido apenas arquivos CSV\"), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: handleUpload,\n    type: \"button\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 13\n    }\n  }, \"Enviar\")))));\n};\n\nexport default Import;","map":{"version":3,"sources":["/home/luisa/Documents/GoStack/Desafios/desafio-fundamentos-reactjs/src/pages/Import/index.tsx"],"names":["React","useState","useHistory","filesize","Header","FileList","Upload","Container","Title","ImportFileContainer","Footer","api","Import","uploadedFiles","setUploadedFiles","history","handleUpload","data","FormData","file","append","post","err","console","log","response","error","submitFile","files","uploadFiles","map","name","readableSize","size","length","alert"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;AACA,SAASC,UAAT,QAA2B,kBAA3B;AAEA,OAAOC,QAAP,MAAqB,UAArB;AAEA,OAAOC,MAAP,MAAmB,yBAAnB;AACA,OAAOC,QAAP,MAAqB,2BAArB;AACA,OAAOC,MAAP,MAAmB,yBAAnB;AAEA,SAASC,SAAT,EAAoBC,KAApB,EAA2BC,mBAA3B,EAAgDC,MAAhD,QAA8D,UAA9D;;AAGA,OAAOC,GAAP,MAAgB,oBAAhB;;AAQA,MAAMC,MAAgB,GAAG,MAAM;AAC7B,QAAM,CAACC,aAAD,EAAgBC,gBAAhB,IAAoCb,QAAQ,CAAc,EAAd,CAAlD;AACA,QAAMc,OAAO,GAAGb,UAAU,EAA1B;;AAEA,iBAAec,YAAf,GAA6C;AAC3C,UAAMC,IAAI,GAAG,IAAIC,QAAJ,EAAb;AAEA,UAAMC,IAAI,GAAGN,aAAa,CAAC,CAAD,CAA1B;AAEAI,IAAAA,IAAI,CAACG,MAAL,CAAY,MAAZ,EAAoBD,IAAI,CAACA,IAAzB;;AAEA,QAAI;AACF,YAAMR,GAAG,CAACU,IAAJ,CAAS,sBAAT,EAAiCJ,IAAjC,CAAN;AACD,KAFD,CAEE,OAAOK,GAAP,EAAY;AACZC,MAAAA,OAAO,CAACC,GAAR,CAAYF,GAAG,CAACG,QAAJ,CAAaC,KAAzB;AACD;AACF;;AAED,WAASC,UAAT,CAAoBC,KAApB,EAAyC;AACvC,UAAMC,WAAW,GAAGD,KAAK,CAACE,GAAN,CAAUX,IAAI,KAAK;AACrCA,MAAAA,IADqC;AAErCY,MAAAA,IAAI,EAAEZ,IAAI,CAACY,IAF0B;AAGrCC,MAAAA,YAAY,EAAE7B,QAAQ,CAACgB,IAAI,CAACc,IAAN;AAHe,KAAL,CAAd,CAApB;AAMAnB,IAAAA,gBAAgB,CAACe,WAAD,CAAhB;AACD;;AAED,sBACE,uDACE,oBAAC,MAAD;AAAQ,IAAA,IAAI,EAAC,OAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,eAEE,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oCADF,eAEE,oBAAC,mBAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,MAAD;AAAQ,IAAA,QAAQ,EAAEF,UAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,EAEG,CAAC,CAACd,aAAa,CAACqB,MAAhB,iBAA0B,oBAAC,QAAD;AAAU,IAAA,KAAK,EAAErB,aAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAF7B,eAIE,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAK,IAAA,GAAG,EAAEsB,KAAV;AAAiB,IAAA,GAAG,EAAC,OAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,kCADF,eAKE;AAAQ,IAAA,OAAO,EAAEnB,YAAjB;AAA+B,IAAA,IAAI,EAAC,QAApC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cALF,CAJF,CAFF,CAFF,CADF;AAsBD,CAlDD;;AAoDA,eAAeJ,MAAf","sourcesContent":["import React, { useState } from 'react';\nimport { useHistory } from 'react-router-dom';\n\nimport filesize from 'filesize';\n\nimport Header from '../../components/Header';\nimport FileList from '../../components/FileList';\nimport Upload from '../../components/Upload';\n\nimport { Container, Title, ImportFileContainer, Footer } from './styles';\n\nimport alert from '../../assets/alert.svg';\nimport api from '../../services/api';\n\ninterface FileProps {\n  file: File;\n  name: string;\n  readableSize: string;\n}\n\nconst Import: React.FC = () => {\n  const [uploadedFiles, setUploadedFiles] = useState<FileProps[]>([]);\n  const history = useHistory();\n\n  async function handleUpload(): Promise<void> {\n    const data = new FormData();\n\n    const file = uploadedFiles[0];\n\n    data.append('file', file.file);\n\n    try {\n      await api.post('/transactions/import', data);\n    } catch (err) {\n      console.log(err.response.error);\n    }\n  }\n\n  function submitFile(files: File[]): void {\n    const uploadFiles = files.map(file => ({\n      file,\n      name: file.name,\n      readableSize: filesize(file.size),\n    }));\n\n    setUploadedFiles(uploadFiles);\n  }\n\n  return (\n    <>\n      <Header size=\"small\" />\n      <Container>\n        <Title>Importar uma transação</Title>\n        <ImportFileContainer>\n          <Upload onUpload={submitFile} />\n          {!!uploadedFiles.length && <FileList files={uploadedFiles} />}\n\n          <Footer>\n            <p>\n              <img src={alert} alt=\"Alert\" />\n              Permitido apenas arquivos CSV\n            </p>\n            <button onClick={handleUpload} type=\"button\">\n              Enviar\n            </button>\n          </Footer>\n        </ImportFileContainer>\n      </Container>\n    </>\n  );\n};\n\nexport default Import;\n"]},"metadata":{},"sourceType":"module"}